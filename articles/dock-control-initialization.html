<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>DockControl Initialization and Defaults | Dock for Avalonia </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="DockControl Initialization and Defaults | Dock for Avalonia ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/wieslawsoltes/Dock/blob/master/docfx/articles/dock-control-initialization.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="dockcontrol-initialization-and-defaults">DockControl Initialization and Defaults</h1>

<p><code>DockControl</code> wires up the factory and layout when <code>InitializeFactory</code> and <code>InitializeLayout</code> are enabled. This guide explains what the control sets up for you and when you might want to take over manually.</p>
<h2 id="factory-assignment">Factory assignment</h2>
<p>When a <code>Layout</code> is assigned, <code>DockControl</code> checks for a factory:</p>
<ul>
<li>If <code>Layout.Factory</code> is <code>null</code> and <code>DockControl.Factory</code> is set, it assigns that factory to the layout.</li>
<li>If <code>Layout.Factory</code> is already set, it uses it as-is.</li>
</ul>
<p>If neither is set, initialization stops and the control will not set up locators or call <code>InitLayout</code>.</p>
<h2 id="initializefactory-behavior">InitializeFactory behavior</h2>
<p>When <code>InitializeFactory=&quot;True&quot;</code>, <code>DockControl</code> populates the factory with default locators:</p>
<ul>
<li><code>ContextLocator</code> is set to a new empty dictionary.</li>
<li><code>DockableLocator</code> is set to a new empty dictionary.</li>
<li><code>HostWindowLocator</code> is set with a default entry for <code>IDockWindow</code> that creates a <code>HostWindow</code>.</li>
<li><code>DefaultContextLocator</code> is set to return <code>DockControl.DefaultContext</code>.</li>
<li><code>DefaultHostWindowLocator</code> is set to return a new <code>HostWindow</code>.</li>
</ul>
<p>This makes a minimal layout work out of the box, but it also means any locators you configured earlier will be replaced. If you want to populate locators yourself or integrate with dependency injection, set <code>InitializeFactory=&quot;False&quot;</code> and configure the factory manually.</p>
<h2 id="initializelayout-behavior">InitializeLayout behavior</h2>
<p>When <code>InitializeLayout=&quot;True&quot;</code>, <code>DockControl</code> calls:</p>
<pre><code class="lang-csharp">layout.Factory.InitLayout(layout);
</code></pre>
<p>This initializes owners, commands, and view model state for every dockable in the layout. If your factory needs additional setup (for example, custom locators), configure it before calling <code>InitLayout</code>.</p>
<h2 id="defaultcontext-usage">DefaultContext usage</h2>
<p><code>DockControl.DefaultContext</code> feeds the factory fallback for <code>ContextLocator</code> when <code>InitializeFactory</code> is enabled. You can set it from code or bind it in XAML:</p>
<pre><code class="lang-csharp">var dockControl = new DockControl
{
    DefaultContext = new MainViewModel(),
    InitializeFactory = true,
    InitializeLayout = true
};
</code></pre>
<pre><code class="lang-xaml">&lt;DockControl Layout=&quot;{Binding Layout}&quot;
             Factory=&quot;{Binding Factory}&quot;
             DefaultContext=&quot;{Binding}&quot;
             InitializeFactory=&quot;True&quot;
             InitializeLayout=&quot;True&quot; /&gt;
</code></pre>
<p>If you prefer to set <code>DefaultContextLocator</code> directly, disable <code>InitializeFactory</code> or assign your own locator after the control initializes.</p>
<h2 id="recommended-patterns">Recommended patterns</h2>
<ul>
<li>For quick samples and XAML-only layouts, keep both flags enabled.</li>
<li>For DI-heavy apps, disable <code>InitializeFactory</code> and set locators explicitly in your factory.</li>
<li>Always call <code>InitLayout</code> once after you finish building or deserializing the layout.</li>
</ul>
<p>Related guides:</p>
<ul>
<li><a href="dock-context-locator.html">Context locators</a></li>
<li><a href="dock-host-window-locator.html">Host window locators</a></li>
<li><a href="dock-manager-guide.html">DockManager guide</a></li>
</ul>
<p>For an overview of all guides see the <a href="README.html">documentation index</a>.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/wieslawsoltes/Dock/blob/master/docfx/articles/dock-control-initialization.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
